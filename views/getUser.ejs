<!DOCTYPE html>
<html>
<head>
	<title>Users</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>
<body>
	

  <table id="myTable" class="display">
    <thead>
      <tr>
        <th>Username</th>
        <th>Email</th>
        <th>Name</th>
        <th>DOB</th>
        <th>Contact No</th>
        <th>Gender</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% for (var i = 0; i < users.length; i++) { %>
        <tr>
            <td><%= users[i].username %></td>
            <td><%= users[i].email %></td>
            <td><%= users[i].name %></td>
            <td><%= users[i].dob %></td>
            <td><%= users[i].mobile %></td>
            <td><%=users[i].gender%></td>
            <td><a href="#" onclick="deleteuser(this.id, this)" id="<%= users[i]._id %>">Delete</a></td>
        </tr>
      <% } %>
    </tbody>
  </table>

	
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript">
    $(document).ready( function () {
      $('#myTable').DataTable();
    } );
    function deleteuser(id, r){
        data = {'id': id}
        $.ajax({
            type: 'GET',
            url : '/admin/deleteUser',
            data: data, 
            success: (data)=> {
                // console.log(data);
            }
        });
        var i = r.parentNode.parentNode.rowIndex;
        document.getElementById("myTable").deleteRow(i);
     return false;
    }
    

  </script>
</body>
</html>